<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VeloType â€” Typing Practice</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ===== HEADER ===== -->
  <header id="header">
    <div class="header-left">
      <a href="index.html" class="logo-link"><h1 class="logo">âš¡ VeloType</h1></a>
    </div>
    <div class="header-center">
      <div id="streakDisplay" class="streak-display" title="Daily streak">
        <span class="streak-icon">ðŸ”¥</span>
        <span id="streakCount">0</span>
      </div>
      <div id="dailyGoalDisplay" class="daily-goal-display" title="Daily goal progress">
        <div class="goal-bar-wrap">
          <div class="goal-bar-fill" id="goalBarFill"></div>
        </div>
        <span class="goal-text" id="goalText">0/50 wpm goal</span>
      </div>
    </div>
    <div class="header-right">
      <button id="soundToggle" class="icon-btn" title="Toggle sound">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 010 14.14M15.54 8.46a5 5 0 010 7.07"/></svg>
      </button>
      <button id="statsBtn" class="icon-btn" title="Typing history">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 20V10M12 20V4M6 20v-6"/></svg>
      </button>
      <button id="settingsBtn" class="icon-btn" title="Settings">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
      </button>
      <button id="themeToggle" class="icon-btn" title="Toggle theme">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z"/></svg>
      </button>
    </div>
  </header>

  <!-- ===== MODE SELECTOR ===== -->
  <div id="modeSelector">
    <div class="mode-group">
      <button class="mode-toggle" id="togglePunctuation" title="Punctuation">@ punctuation</button>
      <button class="mode-toggle" id="toggleNumbers" title="Numbers"># numbers</button>
    </div>
    <div class="mode-separator"></div>
    <div class="mode-group">
      <button class="mode-btn active" data-mode="time" data-value="15">time</button>
      <button class="mode-btn" data-mode="words" data-value="25">words</button>
      <button class="mode-btn" data-mode="quote">quote</button>
      <button class="mode-btn" data-mode="custom">custom</button>
    </div>
    <div class="mode-separator"></div>
    <div class="mode-group" id="difficultyOptions">
      <button class="diff-btn" data-diff="easy">easy</button>
      <button class="diff-btn active" data-diff="medium">medium</button>
      <button class="diff-btn" data-diff="hard">hard</button>
      <button class="diff-btn" data-diff="expert">expert</button>
    </div>
    <div class="mode-separator"></div>
    <div class="mode-group" id="timeOptions">
      <button class="sub-mode-btn active" data-value="15">15</button>
      <button class="sub-mode-btn" data-value="30">30</button>
      <button class="sub-mode-btn" data-value="60">60</button>
      <button class="sub-mode-btn" data-value="120">120</button>
    </div>
    <div class="mode-group hidden" id="wordOptions">
      <button class="sub-mode-btn active" data-value="10">10</button>
      <button class="sub-mode-btn" data-value="25">25</button>
      <button class="sub-mode-btn" data-value="50">50</button>
      <button class="sub-mode-btn" data-value="100">100</button>
    </div>
  </div>

  <!-- ===== TYPING TEST ===== -->
  <div id="typingTest">
    <div id="liveStats">
      <div class="live-stat" id="liveWpm">
        <span class="stat-value">0</span>
        <span class="stat-label">wpm</span>
      </div>
      <div class="live-stat" id="liveAcc">
        <span class="stat-value">100</span>
        <span class="stat-label">acc</span>
      </div>
      <div class="live-stat" id="liveTimer">
        <span class="stat-value">15</span>
        <span class="stat-label">time</span>
      </div>
    </div>

    <!-- Capslock Warning -->
    <div id="capslockWarning" class="capslock-warning hidden">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
      Caps Lock is ON
    </div>

    <!-- Quote info -->
    <div id="quoteInfo" class="quote-info hidden">
      <span id="quoteAuthor"></span>
    </div>

    <div id="wordsWrapper">
      <div id="caret"></div>
      <div id="words"></div>
      <div id="focusWarning">
        <div class="focus-message">Click here or press any key to focus</div>
      </div>
    </div>

    <textarea id="inputField" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"></textarea>
  </div>

  <!-- ===== RESULTS ===== -->
  <div id="result" class="hidden">
    <div class="result-header">
      <div class="result-main-stat">
        <div class="result-big-number" id="resultWpm">0</div>
        <div class="result-big-label">wpm</div>
        <div class="pb-indicator hidden" id="pbIndicator">ðŸ‘‘ new personal best!</div>
      </div>
      <div class="result-main-stat">
        <div class="result-big-number" id="resultAcc">0%</div>
        <div class="result-big-label">acc</div>
      </div>
    </div>

    <div class="result-stats-grid">
      <div class="result-stat-card">
        <div class="stat-card-value" id="resultRaw">0</div>
        <div class="stat-card-label">raw wpm</div>
      </div>
      <div class="result-stat-card">
        <div class="stat-card-value" id="resultConsistency">0%</div>
        <div class="stat-card-label">consistency</div>
      </div>
      <div class="result-stat-card">
        <div class="stat-card-value" id="resultChars">0/0/0/0</div>
        <div class="stat-card-label">correct / incorrect / extra / missed</div>
      </div>
      <div class="result-stat-card">
        <div class="stat-card-value" id="resultTime">0s</div>
        <div class="stat-card-label">time</div>
      </div>
      <div class="result-stat-card">
        <div class="stat-card-value" id="resultTestType">time 15</div>
        <div class="stat-card-label">test type</div>
      </div>
    </div>

    <div class="chart-container">
      <canvas id="wpmChart"></canvas>
    </div>

    <!-- Keyboard Heatmap -->
    <div class="heatmap-container" id="heatmapContainer">
      <h3 class="heatmap-title">Keyboard Heatmap</h3>
      <div class="heatmap-legend">
        <span class="legend-label">accurate</span>
        <div class="legend-gradient"></div>
        <span class="legend-label">error-prone</span>
      </div>
      <div id="keyboardHeatmap" class="keyboard-heatmap"></div>
    </div>

    <div class="result-actions">
      <button id="restartBtn" class="restart-btn" title="Restart (Tab + Enter)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
        restart
      </button>
      <button id="exportBtn" class="restart-btn" title="Export results">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        export
      </button>
    </div>
  </div>

  <!-- ===== STATS MODAL ===== -->
  <div id="statsModal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Typing Stats</h2>
        <button class="modal-close" id="statsClose">&times;</button>
      </div>
      <div class="stats-summary">
        <div class="summary-card">
          <div class="summary-value" id="statsTotalTests">0</div>
          <div class="summary-label">tests taken</div>
        </div>
        <div class="summary-card">
          <div class="summary-value" id="statsAvgWpm">0</div>
          <div class="summary-label">avg wpm</div>
        </div>
        <div class="summary-card">
          <div class="summary-value" id="statsBestWpm">0</div>
          <div class="summary-label">best wpm</div>
        </div>
        <div class="summary-card">
          <div class="summary-value" id="statsTotalTime">0m</div>
          <div class="summary-label">total time</div>
        </div>
        <div class="summary-card">
          <div class="summary-value" id="statsAvgAcc">0%</div>
          <div class="summary-label">avg accuracy</div>
        </div>
        <div class="summary-card">
          <div class="summary-value" id="statsStreak">0</div>
          <div class="summary-label">day streak</div>
        </div>
      </div>
      <h3 class="history-title">Recent Tests</h3>
      <div class="history-table-wrap">
        <table class="history-table">
          <thead>
            <tr><th>wpm</th><th>raw</th><th>acc</th><th>mode</th><th>time</th><th>date</th></tr>
          </thead>
          <tbody id="historyTableBody"></tbody>
        </table>
      </div>
      <div class="modal-actions">
        <button id="clearHistoryBtn" class="restart-btn">clear history</button>
      </div>
    </div>
  </div>

  <!-- ===== SETTINGS MODAL ===== -->
  <div id="settingsModal" class="modal-overlay hidden">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h2>Settings</h2>
        <button class="modal-close" id="settingsClose">&times;</button>
      </div>
      <div class="settings-list">
        <div class="setting-item">
          <span class="setting-label">Caret Style</span>
          <div class="setting-options">
            <button class="setting-btn active" data-caret="line">| line</button>
            <button class="setting-btn" data-caret="block">â–ˆ block</button>
            <button class="setting-btn" data-caret="underline">_ underline</button>
          </div>
        </div>
        <div class="setting-item">
          <span class="setting-label">Sound Effects</span>
          <div class="setting-options">
            <button class="setting-btn" id="soundOnBtn" data-sound="on">on</button>
            <button class="setting-btn active" id="soundOffBtn" data-sound="off">off</button>
          </div>
        </div>
        <div class="setting-item">
          <span class="setting-label">Daily WPM Goal</span>
          <div class="setting-options">
            <input type="number" id="dailyGoalInput" class="setting-input" min="10" max="200" value="50">
            <button class="setting-btn" id="saveGoalBtn">save</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== CUSTOM TEXT MODAL ===== -->
  <div id="customTextModal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Custom Text</h2>
        <button class="modal-close" id="customTextClose">&times;</button>
      </div>
      <p class="modal-desc">Paste your own text to practice typing.</p>
      <textarea id="customTextArea" class="custom-textarea" placeholder="Type or paste your text here..."></textarea>
      <div class="modal-actions">
        <button id="startCustomBtn" class="restart-btn">start typing</button>
      </div>
    </div>
  </div>

  <!-- ===== FOOTER ===== -->
  <footer id="footer">
    <div class="footer-hint">tab + enter â€” restart test</div>
    <div class="footer-credit">created by Shivam Kasaudhan</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="words.js"></script>
  <script src="script.js"></script>
</body>
</html>
